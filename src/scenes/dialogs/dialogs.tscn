[gd_scene load_steps=3 format=3 uid="uid://bitddhy1ncjge"]

[sub_resource type="GDScript" id="GDScript_djui1"]
script/source = "extends FileDialog

func _ready() -> void:
	SignalManager.create_export_config_dialog.connect(_on_create_export_config)
	file_selected.connect(_on_folder_decided)
	filters = [\"*.json\"]

func _on_create_export_config() -> void:
	popup()

func _on_folder_decided(fpath: String) -> void:
	var game_config: PackedByteArray = GameConfig2.export_config_from_file(fpath)
	hide()
	SignalManager.export_conf.emit(game_config)
"

[sub_resource type="GDScript" id="GDScript_1cw35"]
script/source = "extends FileDialog

var config: PackedByteArray = []

func _ready() -> void:
	SignalManager.export_conf.connect(_on_config_created)
	file_selected.connect(_on_file_decided)
	filters = [\"*.obgf\"]

func _on_config_created(conf: PackedByteArray) -> void:
	config = conf
	popup()

func _on_file_decided(fpath: String) -> void:
	var f = FileAccess.open(fpath, FileAccess.WRITE)
	f.store_buffer(config)
	f.close()
	print(\"Finished config\")
"

[node name="Dialogs" type="Node"]

[node name="ExportConfigFolderOpen" type="FileDialog" parent="."]
title = "Open a File"
initial_position = 2
size = Vector2i(1280, 720)
unresizable = true
borderless = true
content_scale_size = Vector2i(640, 360)
ok_button_text = "Open"
file_mode = 0
access = 2
use_native_dialog = true
script = SubResource("GDScript_djui1")

[node name="ExportConfigFileSave" type="FileDialog" parent="."]
title = "Save config file"
initial_position = 2
size = Vector2i(1280, 720)
unresizable = true
borderless = true
content_scale_size = Vector2i(640, 360)
ok_button_text = "Save"
access = 2
use_native_dialog = true
script = SubResource("GDScript_1cw35")
